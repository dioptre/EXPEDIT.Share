(function(){



window.renderFunction['tiny-location'] = function (selected) {

    var json = selected.data('json');


    //     var link = "/share/Location/" + selectedData[i].refid;
    //     newContent += "<div class=\"locationpicker embed-media-article\"><p class=\"title\"><a href=\'" + link + "\'>" + selectedData[i].name + "</a></p></div>&nbsp;";



    selected.append($('<a>').attr({
        href: "/share/Location/" + json.refid,
    }).html(json.name));
    selected.append($('<br/>'));
    selected.append($('div').attr({
        id : 'map-' + json.id
    }));
    Ember.run.scheduleOnce('afterRender', selected, function () {
        var lmap = SetupMap('map-' + json.id);
        //RedrawMap(lmap);
        var geoData = ParseGeographyData(json.geography);
        AddMarkerUnique(lmap, GetFirstLocation(geoData), true, json.name, json.refid);
        RefocusMap(lmap);
        setTimeout(function () {
            lmap.setZoom(15);
        }, 1000);
    });

}


})()
(function () {
    
    // Template to convert JSON to html form...
    window.renderFunction['tiny-workflow'] = function (selected) {
        console.log(selected)
        var data = selected.data('json');
        //var formID = 'frm-' + formData.id;

        //var $form = $('<form>').attr({
        //    id: formID
        //})

        //$.each(formData.fields, function (i, d) {
        //    var source = $("#temp-" + d.field_type).html();
        //    var template = Handlebars.compile(source);
        //    var html = template(d);
        //    $form.append(html);
        //})

        //$form.append($('<div>').attr({
        //    class: 'btn btn-primary tiny-form-submit'
        //}).html('submit'))
        //var form = $form[0].outerHTML;

        //var source = $("#form-tabs").html();
        //var template = Handlebars.compile(source);
        //var htmlTabs = template({ outlet: form, id: formID, heading: formData.heading });




        //selected.html(htmlTabs);


        var myView = App.WorkflowView.create({
            controller: Ember.Object.create({
                data: { outlet: selected.attr('id'), wfid: data[0].refid, wfname: data[0].name },
                selected: null
            })
        });

        Ember.run.scheduleOnce('afterRender', this, function () {
            myView.appendTo('#gout'); //' + selected.attr('id'));
        });


    }


    window.renderFunction['tiny-workflow-trigger'] = function (selected) {
       
    }

    // This is extra code run inside tinymce to allow editing of the form
    window.renderFunction['tiny-workflow-editor'] = function (e) {
        
    }
           



})();

